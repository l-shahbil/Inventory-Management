
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum Role {
  ADMIN
  EMPLOYEE
}

model User {
  UserId   Int      @id @default(autoincrement())
  Name String
  Phone        String
  Email        String
  Password     String
  Role          Role  @default(EMPLOYEE)
  invoices     Invoices[]
  inventoryReceipts InventoryReceipts[]
}

model Suppliers {
  SupplierId   Int             @id @default(autoincrement())
  SupplierName String
  Phone        String
  Email        String
  receipts     InventoryReceipts[]
}

model Products {
  ProductId     Int                 @id @default(autoincrement())
  ProductName   String
  CategoryId    Int
  StockQuantity Int
  SerialNumber  String
  MinStockLevel Int
  ExpirationDate DateTime
  Category      Categories          @relation(fields: [CategoryId], references: [CategoryId])
  invoiceItems  InvoiceItems[]
  receiptItems  InventoryReceiptItems[]
}



model Categories {
  CategoryId   Int        @id @default(autoincrement())
  CategoryName String
  products     Products[]
}

model Invoices {
  InvoiceId   Int       @id @default(autoincrement())
  InvoiceDate DateTime  @default(now())
  UserId  Int
  Employee    User @relation(fields: [UserId], references: [UserId])
  items       InvoiceItems[]
}

model InvoiceItems {
  InvoiceItemId Int      @id @default(autoincrement())
  InvoiceId     Int
  ProductId     Int
  Quantity      Int
  Invoice       Invoices @relation(fields: [InvoiceId], references: [InvoiceId])
  Product       Products @relation(fields: [ProductId], references: [ProductId])
}



model InventoryReceipts {
  ReceiptId    Int                  @id @default(autoincrement())
  SupplierId   Int
  UserId   Int
  ReceiptDate  DateTime             @default(now())
  Supplier     Suppliers            @relation(fields: [SupplierId], references: [SupplierId])
  Employee     User            @relation(fields: [UserId], references: [UserId])
  receiptItems InventoryReceiptItems[]
}

model InventoryReceiptItems {
  ReceiptItemId   Int         @id @default(autoincrement())
  ReceiptId       Int
  ProductId       Int
  QuantityReceived Int
  Receipt         InventoryReceipts @relation(fields: [ReceiptId], references: [ReceiptId])
  Product         Products         @relation(fields: [ProductId], references: [ProductId])
}
